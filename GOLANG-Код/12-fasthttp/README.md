# ⚡ GOLANG — fasthttp

`fasthttp` — это **высокопроизводительный HTTP‑сервер/клиент для Go**, ориентированный на максимальную скорость и минимальные аллокации.

---

## 1. Что такое fasthttp

> **fasthttp — альтернатива `net/http`, когда важна максимальная производительность.**

Особенности:

* минимальные аллокации
* высокая пропускная способность
* нестандартный API

---

## 2. Когда нужен fasthttp

Используется, если:

* очень высокий RPS
* узкое место — HTTP
* сервис упирается в производительность

❗ Для большинства сервисов **`net/http` или `gin` достаточно**.

---

## 3. Установка

```bash
go get github.com/valyala/fasthttp
```

---

## 4. Минимальный сервер

```go
fasthttp.ListenAndServe(":8080", func(ctx *fasthttp.RequestCtx) {
    ctx.WriteString("hello")
})
```

* нет `ResponseWriter`
* нет `Request`
* используется `RequestCtx`

---

## 5. RequestCtx

`*fasthttp.RequestCtx` содержит:

* запрос
* ответ
* параметры
* методы чтения/записи

Пример:

```go
method := ctx.Method()
path := ctx.Path()
```

---

## 6. Чтение данных

### Query

```go
value := ctx.QueryArgs().Peek("name")
```

### Body

```go
body := ctx.PostBody()
```

---

## 7. Ответ клиенту

```go
ctx.SetStatusCode(200)
ctx.SetContentType("application/json")
ctx.Write([]byte("{}"))
```

---

## 8. Почему fasthttp быстрее

* меньше интерфейсов
* меньше аллокаций
* переиспользование объектов
* zero‑copy подход

---

## 9. Ограничения fasthttp

* ❌ не совместим с `net/http`
* ❌ сложнее API
* ❌ меньше middleware
* ❌ меньше экосистема

---

## 10. fasthttp vs net/http

| Критерий   | net/http | fasthttp |
| ---------- | -------- | -------- |
| Простота   | ✅        | ❌        |
| Экосистема | ✅        | ❌        |
| Скорость   | ⚠️       | ✅        |

---

## 11. Частые ошибки

* ❌ использовать fasthttp без необходимости
* ❌ копировать API `net/http`
* ❌ забывать про читаемость кода

---

## 12. Короткий конспект

* fasthttp = скорость
* нестандартный API
* нужен для high‑load

---

## 13. Главная мысль

> **fasthttp — инструмент для крайних случаев, а не дефолтный выбор.**

---

