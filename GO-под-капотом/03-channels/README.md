# Channels –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º (Go)

---

## Channels –≤ Go ‚Äî –∫—Ä–∞—Ç–∫–æ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

`channel` –≤ Go ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É goroutine.

–ö–∞–Ω–∞–ª—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç **message passing** (–æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏),
–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç **shared memory** (–æ–±—â–µ–π –ø–∞–º—è—Ç–∏),
–≥–¥–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ goroutine –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–¥–Ω–∏–º–∏ –∏ —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏.

> Don‚Äôt communicate by sharing memory; share memory by communicating.  
> *–ù–µ –æ–±—â–∞–π—Ç–µ—Å—å, –¥–µ–ª—è—Å—å –ø–∞–º—è—Ç—å—é; –¥–µ–ª–∏—Ç–µ—Å—å –ø–∞–º—è—Ç—å—é, –æ–±—â–∞—è—Å—å.*

–ö–∞–Ω–∞–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç goroutine, –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞,
–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –µ—ë, –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤—Ç–æ—Ä–∞—è —Å—Ç–æ—Ä–æ–Ω–∞.

---

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏

üëâ [–û—Ç–∫—Ä—ã—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏](patterns/README.md)

---

## –ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (`make(chan T)`)
```go
–û–ø–µ—Ä–∞—Ü–∏—è \ –°–æ—Å—Ç–æ—è–Ω–∏–µ   | –û—Ç–∫—Ä—ã—Ç                               | –ó–∞–∫—Ä—ã—Ç                       | –ù–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (nil)
------------------------|--------------------------------------|------------------------------|--------------------------
–ß—Ç–µ–Ω–∏–µ (<-ch)          | ‚è≥ –±–ª–æ–∫ –¥–æ –ø–∏—Å–∞—Ç–µ–ª—è                  | ‚úÖ zero value                | ‚è≥ –±–ª–æ–∫ –Ω–∞–≤—Å–µ–≥–¥–∞
–ó–∞–ø–∏—Å—å (ch <- v)       | ‚è≥ –±–ª–æ–∫ –¥–æ —á–∏—Ç–∞—Ç–µ–ª—è                  | ‚ùå PANIC                     | ‚è≥ –±–ª–æ–∫ –Ω–∞–≤—Å–µ–≥–¥–∞
close(ch)              | ‚úÖ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç                         | ‚ùå PANIC                     | ‚ùå PANIC

```
---

## –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (`make(chan T, N)`)
```go
–û–ø–µ—Ä–∞—Ü–∏—è \ –°–æ—Å—Ç–æ—è–Ω–∏–µ   | –û—Ç–∫—Ä—ã—Ç, –±—É—Ñ–µ—Ä –ø—É—Å—Ç        | –û—Ç–∫—Ä—ã—Ç, –±—É—Ñ–µ—Ä –Ω–µ –ø—É—Å—Ç     | –û—Ç–∫—Ä—ã—Ç, –±—É—Ñ–µ—Ä –ø–æ–ª–æ–Ω      | –ó–∞–∫—Ä—ã—Ç
------------------------|---------------------------|----------------------------|---------------------------|------------------------
–ß—Ç–µ–Ω–∏–µ (<-ch)          | ‚è≥ –±–ª–æ–∫                   | ‚úÖ —á–∏—Ç–∞–µ—Ç                 | ‚úÖ —á–∏—Ç–∞–µ—Ç                | ‚úÖ –æ—Å—Ç–∞—Ç–∫–∏ ‚Üí zero value
–ó–∞–ø–∏—Å—å (ch <- v)       | ‚úÖ –ø–∏—à–µ—Ç                  | ‚úÖ –ø–∏—à–µ—Ç                  | ‚è≥ –±–ª–æ–∫                  | ‚ùå PANIC
```

---

## –ö–ª—é—á–µ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–∞–Ω–∞–ª–æ–≤

- –∫–∞–Ω–∞–ª –º–æ–∂–µ—Ç –±—ã—Ç—å **–æ—Ç–∫—Ä—ã—Ç**, **–∑–∞–∫—Ä—ã—Ç** –∏–ª–∏ **nil**
- –∑–∞–∫—Ä—ã—Ç–∏–µ –∫–∞–Ω–∞–ª–∞ ‚Äî —ç—Ç–æ **—Å–∏–≥–Ω–∞–ª –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**, –∞ –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- —á—Ç–µ–Ω–∏–µ –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞:
  - –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
  - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **zero value**
- –∑–∞–ø–∏—Å—å –≤ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª:
  - –≤—Å–µ–≥–¥–∞ **PANIC**
- `nil`-–∫–∞–Ω–∞–ª:
  - —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞

---

## Select (–∫—Ä–∞—Ç–∫–æ)

- `select` –≤—ã–±–∏—Ä–∞–µ—Ç **–≥–æ—Ç–æ–≤—É—é –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â—É—é –æ–ø–µ—Ä–∞—Ü–∏—é**
- –µ—Å–ª–∏ –≤—Å–µ case –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –∏ –Ω–µ—Ç `default` ‚Äî `select` –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- `default` –¥–µ–ª–∞–µ—Ç `select` –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–º

–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `select { default }` –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ **busy loop**
(100% –∑–∞–≥—Ä—É–∑–∫–∞ CPU).

---

## Pipeline-–ø–∞—Ç—Ç–µ—Ä–Ω

Pipeline ‚Äî —ç—Ç–æ —Ü–µ–ø–æ—á–∫–∞ goroutine, —Å–æ–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞–º–∏.

–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø:
- —á–∏—Ç–∞–µ—Ç –∏–∑ –≤—Ö–æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞
- –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- –ø–∏—à–µ—Ç –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª
- –∑–∞–∫—Ä—ã–≤–∞–µ—Ç **—Ç–æ–ª—å–∫–æ —Å–≤–æ–π –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª**

–¢–∏–ø–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ —ç—Ç–∞–ø–∞:

```go
func stage(in <-chan T) <-chan U
```

## –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º (–º–∏–Ω–∏–º—É–º, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å)

–ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –∫–∞–Ω–∞–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:

- –±—É—Ñ–µ—Ä (–∏–ª–∏ –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ)

- —ë–º–∫–æ—Å—Ç—å –±—É—Ñ–µ—Ä–∞

- —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

- —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±—É—Ñ–µ—Ä

- sendx, recvx ‚Äî –∫—É–¥–∞ –ø–∏—Å–∞—Ç—å / –æ—Ç–∫—É–¥–∞ —á–∏—Ç–∞—Ç—å

- sendq, recvq ‚Äî –æ—á–µ—Ä–µ–¥–∏ –æ–∂–∏–¥–∞—é—â–∏—Ö goroutine

- mutex (lock)

- —Ñ–ª–∞–≥ closed

## –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:

x ‚Äî —ç—Ç–æ –ö–£–î–ê, q ‚Äî —ç—Ç–æ –ö–¢–û

–í –æ—á–µ—Ä–µ–¥–∏ –æ–∂–∏–¥–∞–Ω–∏—è (sendq, recvq) –ø–æ–ø–∞–¥–∞—é—Ç goroutine, –∞ –Ω–µ –¥–∞–Ω–Ω—ã–µ.
